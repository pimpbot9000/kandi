% --------------------------------------------------------------------

\section{Introduction}

The first stage of committing a cyber attack or a penetration test is reconnaissance or footprinting to acquire information about networking infrastructure of the target. Various footprinting techniques may be used to query open sources, such as using advanced search features of search engines and WHOIS queries. One such technique is Domain Name System (DNS) enumeration which uses public DNS records to gather information about the target without actually probing the target network. The Domain Name System may reveal information such as IP addresses, domains, subdomains, mail exchange services and other information. 

Method of this study is mainly to conduct a literary research about the existing DNS enumeration techniques and their operating principles, not on particular tools. The motivation is that there is no shortage of blog postings explaining the use tools with little or no emphasis on the underlying principles.

The goals of this study is as follows:

\begin{itemize}
 \item Conduct a literary study about existing DNS enumeration techniques
 \item As services move to the cloud investige how DNS enumeration techniques can be leveraged to 
 gather information about cloud services.
 \item Present some use cases
\end{itemize}



DNS has been and still is vulnerable to attacks such as DNS cache poisoning but discussing these kinds of attacks in detail is out of the scope of this study.



\section{The Domain Name System}

The Domain Name system or DNS is a fundamental part of the Internet infrastructure. This chapter gives a brief overview of DNS, related security issues and recent developments related to this study.

\subsection{Overview}
Domain Name System [1034, 1035] is a distributed database implemented in a hierarchy of DNS servers with delegated authority that stores information about services and other resources in the Internet. Notably, DNS stores information that maps host names to IP addresses. The DNS specifies the functionality of DNS servers and the DNS protocol which on the most part is based on the UDP protocol. DNS is part of the Internet Protocol Suite. DNS is an application layer protocol commonly employed by other application layer protocols such as HTTP or FTP. \citep{kurose_ross}\cite{tanenbaum} 

When a client makes a query e.g to retrieve an IP address for a host name, the corresponding IP address is resolved in a recursive manner by a DNS resolver. At the top level there are 13 logical root name servers distributed across the globe named from A to M. Unless the result is not found in cache the root name server is queried first which delegates the query for a top level domain such as .com., to a Top Level Server Domain server or TLD server. The iteration continues until an Authoritative Name Server is found for the host. The query result is returned to the client via DNS resolver. See Figure\ref{fig:resolving} for illustration of the process. \citep{kurose_ross}\cite{tanenbaum} 

In addition there is another class of DNS servers called the local DNS Server which is stricly not part of the DNS hierarcy, but is part of the DNS infratructure. \citep{kurose_ross}

\begin{figure}[htb]
  \begin{center}
    \includegraphics[width=0.9\textwidth]{resolving.png}
    \caption{Resolving an IP address for a host \texttt{www.example.com}. In this example Authoritative name server does not have a record for the IP address. Instead, Authoritative name server has a CNAME record (see Table \ref{table:dns_record_types}). Hostname \texttt{www.example.com} is an "alias" that points to a Canonical Name, \texttt{server123.cloudhosting.com}. This triggers a new iterative query until IP address is resolved.}
    \label{fig:resolving}
  \end{center}
\end{figure}


\subsection{DNS Record Types}

A DNS database or a DNS record has multiple record types. Most common and relevant for this study are listed in Figure \ref{table:dns_record_types}. Among A and AAAA records,  PTR record has a special interest related to this study since it allows reverse DNS lookup which maps an IP address to a hostname.

\begin{table}[th]
\caption{Most common DNS Record types.}
\label{table:dns_record_types}
\begin{center}
\begin{tabular}{|p{0.35\textwidth}|p{0.45\textwidth}|} 
    \hline
Record Type & Description \\
    \hline
    \hline
A & IPv4 address for a host. \cite{RFC1035}\\ 
    \hline
AAAA & IPv6 address for a host RFC3596\\
    \hline
MX & Mail exchange server. \cite{RFC1035} ja 7505 \\
    \hline
CNAME & Canonical Name. Maps an "alias" to a canonical name. \cite{RFC1035} \\
    \hline
SOA & Start Of Authority \\    \hline
PTR & A Pointer Record. Maps an IP addres to a hostname. \cite{RFC1035} \\
    \hline
\end{tabular}
\end{center}
\end{table}

\subsection{DNS Zones}
\label{sec:dns_zones}

A DNS zone is a distinct part of domain namespace which is delegated to an entity such as an organization. An area of one or more subdomains that has been delegated for management and authority is called a DNS zone. DNS zones should not be associated with domain namespaces. A single DNS server may be responsible for multiple zones, and for replication, load distribution and security (e.g to deflect DDoS attacks[]) there are usually multiple domain name servers for each zone.\citep{tanenbaum}

In the example presented if Fig. \ref{fig:resolving} second level domain name server for \texttt{example.com} has delegated the responsibility of subdomain \texttt{www.example.com} for another zone.

If there are multiple domain name servers for a zone there is a primary DNS server which is replicated by secondary servers. A secondary DNS server maintains a read-only copy of the DNS zone file maintained in the primary DNS server. If modifications are made they are made into the DNS zone file of the primary DNS server. The process of secondary DNS server requesting an update and receiving this information is called a Zone Transfer. \citep{tanenbaum}

\subsection{Publicity and Security of DNS}

The instrinsic property of DNS records is that on the most part they are public by design and normal DNS queries are not encrypted. DNS system has a long history of being vulnerable for DNS spoofing and DNS cache poisoning where the attacker tricks DNS server to store false information in a DNS cache \cite{tanenbaum} [RFS3833]. 

DNS Security Extension or DNSSEC has been developed to provide end-to-end data integrity and source authenticity check between the source of DNS data and the client. Threaths of data disclosure were ruled out of scope of DNSSEC [RFS3833]. Although DNSSEC was standardized already in 1997 it is still not widely used but the adoption is progressing slowly \cite{lotr}. In recent years new standards for encrypting DNS query traffic has been developed such as DNS over TCP (DoT) [RFC 7858], DNS Queries over HTTP (DoH) [RFC 8484] and DNS over DTLS [RFC 8094] to prevent passive information gathering. 
[counting in the dark]

* DANE?
* Dynamic Updating?
* Zone poisoning?
* (TSIG) Transaction Signature

\subsection{Recent development in DNS}

* Using DNS to store all sorts of data (TXT RR)

* Changes/advances/new fashions  DNS infrastructure ??

\section{DNS Enumeration}

Due to the original design philosophy and easy access principle, DNS is not only vulnerable to information leakage and attacks such as DNS spoofing. Since DNS records on the most part are intended to be public DNS queries allow attackers the gather information about the target. DNS Enumeration is part of the reconnaissance stage where an attacker gathers information about targets network footprint. This includes gathering information about IP addresses, domains and subdomains. DNS Enumeration is considered to be part of the Open Source Intelligent or OSINT methodology where publicly available ("open source") sources are used in an intelligence context \cite{network_sec_assessment}. DNS enumeration is commonly used jointly with other OSINT methods such as \texttt{whois} queries and exploiting advanced search engine features such as "Google Dorks" \cite{network_sec_assessment}.

This chapter will review the most common methods of DNS enumeration.

\subsection{Basic DNS lookup}

Every resource record or RR can be considered a five-tuple (Domain Name, Type, Class, Time to Live, Value) [1035]. Some of the Types were listed in Table \ref{table:dns_record_types}. In addition to Types (TYPE), DNS defines Query Types (QTYPE) which is a superset of Types. The DNS protocol also defines a Query Class (QCLASS) as a superset of class (CLASS). Every query contains QNAME (fully qualifed domain name or FQDN), QTYPE and QCLASS [1035].

\texttt{Nslookup} and Domain Internet Grober (\texttt{dig}) are common tools found in most Unix enviroments to carry out basic DNS queries. For example \texttt{dig -q www.example.com -t AAAA -c IN} returns an IPv6 address for \texttt{www.example.com} with query type \texttt{IN}.

Above example which returns an IP address for a host name is called a forward lookup. A reverse lookup is aquery returning a host name for an IP address (PTR record).

\subsection{Zone Transfer Attack}

As explained in Section \ref{sec:dns_zones} each DNS zone has a primary server and secondary servers maintain read-only copies of primary servers zone file. DNS protocol defines a special type of query, Asynchronous Transfer Full Range or AXFR which requests for a transfer of an entire list of resource records for zone [RFC 1035]. The DNS zone information may include sensitive information e.g about the internal infrastructure of a network of an organization. Although succeeding in unauthorized zone transfer requests is considered by some as a thing for the past \cite{network_sec_assessment} on a global-scale vulnerability assessment  \citet{global_zone_transfer} were able to carry out approximately 11 million zone transfers containing information such as HINFO (exlplanation here, OS and CPU info etc) records, and domains with \texttt{test.} and \texttt{dev.} prefixes etc.

The AXFR offers no authentication method []. In order to prevent the vulneralibility from occurring the DNS server should be configured to only allow AXFR requests from trusted IP addresses. Transaction signatures should be used..... etc.

\subsection{Zone Enumeration}

"Another vulnerability related to our work is so-called zone
enumeration. Initially, ability to enumerate all the names in
a zone was not considered as an error [2], however, later on,
a compromise has been reached [22] that in certain cases,
the knowledge of all the domain names in a zone can lead
to security risks. RFC 5155 [22] provides some examples
showing that due to this vulnerability, it is easier for an attacker
to obtain email addresses for future spam campaigns or data
useful during a reconnaissance phase of a network attack."  \citet{global_zone_transfer}

\subsection{Reverse DNS sweeping}

"After building a list of IP network blocks used or reserved by        the target organization,  reverse DNS sweeping can gather details of hosts that may be protected or filtered but still have DNS hostnames assigned to them." \cite{network_sec_assessment}

What the hell is protected or filtered hosts?

\subsection{Zone Walking}

NSEC allows zone walking, NSEC3 was to make this harder.

\subsection{Brute Forcing}



\subsection{Notes}

What is  DNSDB??

What is HINFO??

UPDATE request.

NXDOMAIN

"DNS is defined in RFCs 1034, 1035, 2181" (Tanenbaum)

Tekstiä ja viittaus \cite{tanenbaum} toinen viittaus.
Joku viittaus \citep{kurose_ross}. Kolmas viittaus
\cite{zone_poisoning} something \cite{dns_privacy} something.

\section{Subdomain Enumeration}


\section{Enumerating Cloud Services}

\subsection{Something something}

\subsection{Oma testaus2}

hello \cite{hackers_guide}.

\subsubsection{Testaus2}

kfjdkfjf \cite{dns_responsiveness} asasa dflfjdf \cite{dns_belongs_to_us} sdsd.
\cite{counting_in_the_dark} dsdsd
\cite{ipv6_discovery} dsdsd
\cite{service_discovery} sdsdsd
%\cite{hackers_guide} sdsds

\subsection{Tämän dokumentin tausta}

% Kokeile mitä kappaleen viimeisen rivin lopulle käy, 
% kun sloppypar-ympäristön kommentoi pois: joku rivi
% saattaa ylittää marginaalin. Sloppypar-ympäristössä
% sanojen välissä olevaa tyhjää voi olla enemmänkin
% jotta marginaalin ylityksiä ei tapahdu.
\begin{sloppypar}
  Tämä on TIK.kand-kurssin \LaTeX{}-pohja, jota voi vapaasti
  käyttää. Koko zip-paketin voi ladata kurssin Noppa-sivulta
  \url{https://noppa.aalto.fi/noppa/kurssi/TIK.kand/materiaali/}.
  Pura zip-paketti, avaa \verb!main.pdf! ja samalla katso ja muokkaa
  tex- ja bib-tiedostoja vapaasti. Juuri tämä teksti löytyy
  tiedostosta \verb!luku_sisalto.tex!. Muutoksen jälkeen voit katsoa
  tilannetta komentamalla \verb!make! ja mahdollisesti päivittämällä
  PDF-version (reload). Yritä olla koskematta sty- ja
  bst-tyylitiedostoihin. 
  %Luvun~\ref{sec:esimluku} alussa on mainittu
  %hyviä lähteitä \LaTeX{}in opetteluun ja käyttämiseen.
\end{sloppypar}

Teksti ja koodi on peräisin TIK.kand-kurssin historiallisesta
\LaTeX{}-pohjasta, jota kurssin koordinaattori Jukka Parviainen
uudisti tammikuussa 2011.  Lisäksi suomen kielen lehtori Sanni
Heinzmann on kirjoittanut rakenteellisia vinkkejä luvuittain
(tiivistelmä, käytetyt lyhenteet, johdanto, loppuluku, liitteet).
Viimeisin päivitys on elokuulta 2014.

\subsection{Johdantoluku}
% Sanni Heinzmann

Työn ensimmäinen luku on aina johdanto. Kandidaatintyön laajuudessa
sitä ei ole tarvetta jakaa alalukuihin, diplomityössä ja muissa
isommissa töissä sekä tutkimusraporteissa alaluvut ovat mahdollisia
(esim. 1.1 Tutkimusongelma, 1.2 Aineisto ja tutkimusmenetelmä, jne.).

Johdannon tarkoitus on antaa lukijalle heti alussa selvä kuva siitä,
mihin kysymykseen työ pyrkii vastaamaan
(tutkimusongelma). Tyypillisesti aiheen esittely alkaa sanoilla ``Tämä
(kandidaatin/diplomi)työ käsittelee...''  Johdanto esittelee lyhyesti
työn pääpiirteet ja johdattaa lukijan itse työn pariin. Johdannon
ohjepituus on 1--3 sivua, kandidaatintyössä 2 sivua on hyvä maksimi.

Käsittele nämä aiheet johdannossa (jotakuinkin tässä järjestyksessä):
%
\begin{itemize}
 \item Johdatus aihepiiriin 
(ei liian laajasti, vaan relevantisti ja napakasti)
%
 \item Tutkimuskohteen esittely (MITÄ tämä työ tutkii? 
Kerro työstä/tutkimusaiheesta, ei omasta kirjoitusprosessistasi 
tai omasta kiinnostuksestasi.)
%
 \item Tutkimuksen perustelu: ongelma tai aukko 
(aiemmassa tutkimuksessa on aukko, tai siitä nousee esiin 
kysymys, johon tässä etsitään vastausta)
%
 \item Tutkimusongelma / -kysymykset (koko työsi sydän, 
jonka pitäisi näkyä ''punaisena lankana'' koko työn läpi)
 \item Tavoitteet (Käytä konkreettisesti sanaa ''tavoite'')
 \item Rajaus (Mitä tämä työ EI tutki)
 \item Menetelmä, aineisto, teoreettinen kehys (Esittele, 
MITEN em. aihetta tutkitaan)
 \item Tulokset? (Johdannossa on ihan hyvä antaa lyhyesti 
tietoa päätuloksista, mutta ei pakko)
 \item Työn sisältö ja rakenne (Esittele, miten työn punainen 
lanka etenee, viittaukset työhön: 
``ensin, sitten, seuraavaksi, luvussa 3'' jne.)
\end{itemize}

%\textbf{TIK.kand kommentti: Helpota lukijan työtä kaikin
%mahdollisin tavoin. Haluat voittaa lukijan omalle puolellesi.
%Lukijalle on hyvä tuoda heti alusta selville, mihin pyrit.
%Verratuna kaunokirjallisuuteen: ``kerro heti kuka murhaaja on''}

% --------------------------------------------------------------------

\section{Kandidaatintyön rakenne- ja muotoseikat}
\label{sec:esimluku}

Tässä luvussa esitellään kandidaatintyön muotovaatimuksia
tällä kurssilla. Muutamat alkuperäiset lähteet ovat saattaneet
kadota organisaatio- ja tietojärjestelmämuutoksissa, kun
Into-järjestelmä on korvannut WWW-sivustoja.

\subsection{TKK:n kandidaattityöryhmän ohjeistus}

Yleiset kandidaatintyön muotovaatimukset on annettu TKK:n
kandidaattityöryhmän päätöksellä 14.11.2006 ja ne ovat
kokonaisuudessaan saatavissa osoitteessa
\url{http://www.tkk.fi/fi/opinnot/opintohallinto/paatokset/kandi20061114.pdf}.
Tässä luvussa annetaan lyhyt, selvennetty ja joiltakin osiltaan
karsittu yhteenveto kyseisistä ohjeista. Seuraavassa viitataan siis
edellä mainittuihin TKK:n kandidaatintyön ohjeisiin (esim. ``luku 3''
tarkoittaa TKK:n kandidaatintyön ohjeiden lukua kolme).

\textbf{TIK.kand suositus: Lue alkuperäiset ohjeet erityisesti
  silloin, jos et kirjoita työtä annettua \LaTeX{}-pohjaa käyttäen.}

TKK:n kandidaatintyön ohjeissa käsitellään työn rakennetta (luvussa 3)
ja muotoseikkoja (luvussa 4). Yleisesti todetaan kandidaatintyöstä
seuraavaa:
%
\begin{quotation}
\noindent \it
Kandidaatintyö voi perustua teoreettisen taustan tarkasteluun 
ja sen analysointiin sekä johtopäätösten tekoon tai kokeelliseen osioon ja 
tulosten analysointiin sekä johtopäätösten tekoon
tai edellisten yhdistelmään.
Kandidaatintyön rakenteen tulee olla hyvän tieteellisen kirjoittamisen 
käytännön mukainen
ja sisältävän vähintään seuraavat osat: [$\ldots$] (Luku 3)
\end{quotation}

Rakenteen osia ovat: nimiölehti, tiivistelmä, sisällysluettelo,
symboli- ja lyhenneluettelo (työn luonteen vaatiessa voi puuttua),
johdanto, aikaisempi tutkimus (työn luonteen vaatiessa teoreettinen
tausta), tutkimusongelma ja -menetelmät, tulokset, tarkastelu (työn
luonteen vaatiessa johtopäätökset tai näiden yhdistelmä), lähteet,
liitteet (jos tarpeen). Osat johdannosta tarkasteluun muodostavan työn
tekstiosan. (Luku 3) Tekstiosan sopiva pituus on 15--20 sivua eikä
työtä ole syytä tarpeettomasti pidentää (luku 4.2.1).
Kokonaissivumäärä tulee tällöin olemaan noin 18--25 sivua.

Muotoseikoissa TKK:n kandidaatintyön ohjeissa otetaan esille, että
työn tulee olla jäsennelty ja tyylillisesti sekä kielellisesti
viimeistelty ja moitteeton.  Tarpeettomia tyylillisiä erikoisuuksia
tulee välttää.  Tekstiosassa tulee olla vain työn kannalta oleelliset
kuvat tai taulukot. (Luku 4.1)
%
Kirjasinlaji tulee olla roomalaistyyppinen (Times New Roman
tai Computer Modern\footnote{\LaTeX{}in perusfontti}) ja kooltaan 12 pistettä
(luku 4.2.2). 
%
Työn nimessä ei saa esiintyä lyhenteitä, kaavoja tai lainauksia
(luku 4.2.3).

Nimiölehdellä tulee olla tiedot yliopistosta, tutkinto-ohjelmasta,
työn nimestä, luonteesta (``Kandidaatintyö''), päivämäärä ja tekijän
nimi (luku 4.2.4). Tiivistelmäsivusta esitetään vastaavat seikat,
jotka löytyvät myös tarjolla olevista pohjista
(doc\footnote{\url{http://peppi.hut.fi/pub/kandi/kandi.php}} tai tämä
\LaTeX{}-pohja).  Se ei saa olla sivua pidempi. 
% WANHA:
%Tiivistelmässä
%ilmoitettavaan sivumäärään lasketaan tekstiosan lisäksi
%lähdeluetteloon kuluvat sivut. (Luku 4.2.5)
Tiivistelmässä
ilmoitettavaan sivumäärään lasketaan kaikki sivut yhteen 
nimiölehdestä lähdeluettelon tai liitteiden loppuun
(Kirjaston suullinen ohje 29.8.2011). 

Asemoinnin suhteen tekstiosaa ei sisennetä vaan kappaleiden väliin
jätetään yksi tyhjä rivi. Jos oikea reuna tasataan, niin tulee käyttää
tavutusta ja tarkistaa, että se menee oikein.  Rivivälin tulee olla 1
tai 1,5. (Luku 2.4.7)

Huomaa, että TKK:n kandidaatintyön ohjeissa sivujen numeroinnin ohjeet
ovat ristiriitaiset (luku 4.2.6). Oikea sivunumeroinnin malli on
toteutettu tässä pohjassa.  

Lähdeviittaukset tulee tehdä huolellisesti ja samanmuotoisesti joko
nimi-vuosi- tai numerojärjestelmällä. Alaviitejärjestelmää ei
suositella. (Luku 2.4.8)

\textbf{TIK.kand suositus: Numerointi aloitetaan arabialaisilla
  numeroilla nimiölehdestä kuitenkin niin, ettei numeroa kirjoiteta
  sille. Siten ensimmäisen tiivistelmäsivun sivunumero on 2. 
  Kirjasinkoko on 12, riviväli 1,5. Tekstiviitteissä käytetään
  nimi-vuosi-järjestelmää, mutta tässä ohjaajan sana on määräävä.}

\subsection{TIK.kand: kommentteja rakenne- ja muotoseikoista}

Tekstiasun viimeistelyyn tulee varata runsaasti aikaa V3- ja
V4-palautusten väliin. Työn tulisi olla oleellisesti valmis jo
V3-palautuksessa, jotta ohjaajasi voi antaa palautetta, kuinka työ
viimeistellään ja saadaan hyväksi kokonaisuudeksi, ja sinulla on 
tarpeeksi aikaa hienosäätöön.

Huomaa, että sivumäärä on hyvin riippuvainen tekstin luonteesta:
pelkkää tekstiä mahtuu tässä \LaTeX{}-pohjassa sivulle noin 300 sanaa,
kun taas jos mukana on kuvia, luetteloita tai paljon väliotsikkoja,
sanamäärä on huomattavasti pienempi. Vastaavasti pienempi riviväli tai
fonttikoko antaa lisää sanoja sivua kohden.

Luennolla 6.9.2011 kurssin vastuuopettaja Tomi Janhunen linjasi, että
sivumäärä ei ole kriittisin asia vaan itse aiheen käsittely.  Jos
sivumäärä poikkeaa, ohjaaja tai kurssin henkilökunta voi puuttua
tilanteeseen. Jos sivumäärä on pieni, voidaan kysyä, onko aihetta
käsitelty tarpeeksi laajasti tai onko selittämiseen tai perusteluihin
käytetty vaivaa. Toisaalta iso sivumäärä voi kertoa siitä, ettei työn
rajaamista ole hallittu, ja tämäkin voi olla arviointiin liittyvä
tekijä. Myöskään ei saa ajatella sitä, että kun 20 sivua tekstiä tulee
täyteen, niin opinnäytetyö on valmis. Tieteellisen tekstin
kirjoittaminen on iteratiivista: kirjoitetaan, luetaan, karsitaan ja
lisätään, kirjoitetaan uudestaan, luetaan, jne. Tyypillisesti
sivumäärän kanssa ei tule ongelmaa: annetusta tehtävästä tällä
aikataululla tulee tyypillisesti noin 20 sivun mittainen raportti.

Ohjeita kandidaatintyön eri osien kirjoittamiseen on sisällytetty
tähän pohjaan. Kirjoittamisohjeita on koskien tiivistelmää, käytetyt
lyhenteet -osiota, johdantoa, loppulukua ja liitteitä.  Lisäksi
lähdekoodissa \verb!main.tex! on ohjeita alkusanoihin, joiden käyttöä
ei suositella kandidaatintyössä.
.


\subsection{Kirjallisuutta}

Seuraavat kolme kirjaa löytyvät T-kirjaston käsikirjastosta:
%
\begin{itemize}


\item Kielenhuollon opas tarjoaa apua
  oikeinkirjoitukseen. Kirjaa saa Kotimaisten kielten
  tutkimuskeskuksen verkkokaupasta
  \url{http://www.kotus.fi/index.phtml?s=2420} 20 euron hintaan.
\end{itemize}

Kurssiesitteeessä Nopassa on myös linkkejä lukuisiin 
kotimaisiin Internet-sivustoihin opinnäytetyön kirjoittamisesta.
Näitä ovat mm.
%
\begin{itemize}
\item Oulun yliopiston ``Kirjoittamisen ABC''
  \url{http://webcgi.oulu.fi/oykk/abc}
%
\item Helsingin yliopioston puhe- ja kirjoitusviestinnän opas
  ``Kielijelppi'' \url{http://www.kielijelppi.fi/}
%
\item Oman kirjastomme tarjoama tiedonhaun itseopiskelupaketti
  \url{http://peppi.hut.fi/pub/opetus/tiedonhaku/pmwiki.php}
%
\item Yucca Korpela on kirjoittanut nettioppaan ``Arkisen
  asiakirjoittamisen opas'' \url{http://www.cs.tut.fi/~jkorpela/kirj/}
\item Aalto-yliopiston Opiskelutaidot-sivusto \\
  \url{https://into.aalto.fi/ display/ fiopiskelutaidot/}
%
\end{itemize}


% --------------------------------------------------------------------

\section{Esimerkkejä \LaTeX{}in käytöstä}
\label{sec:esimluku}

Tässä luvussa annetaan esimerkkejä tyypillisimpiin
kirjoitustehtäviin. Katso siis valmista PDF-tiedostoa ja lähdetekstiä
tiedostossa \verb!luku_sisalto.tex!. Katso myös varsinaista
päätiedostoa \verb!main.tex! ja etenkin sen alkua, jossa ladataan
lisäpaketteja (sisältäen komentoja). Tämän dokumentin sivuasettelut
tehdään pääosin tyylitiedostossa \verb!aaltosci_t.sty!, jota ei tulisi
itse muuttaa lainkaan.

Tarkempia ohjeita voi etsiä kirjallisuudesta tai Internetistä
sopivilla hakusanoilla. Apua suomeksi: 
, Wikibooksin LaTeX-opas%
\footnote{http://en.wikibooks.org/wiki/LaTeX/}, Jukka Korpelan
LaTeX-sivut%
\footnote{http://www.cs.tut.fi/~jkorpela/softa/latex.html} yms.
Järkäleteoksia, mm.  on saatavilla myös
kirjaston sivujen kautta e-kirjana. Googlaamalla ``latex <ongelmasi
avainsanoja>'' löytyy varmasti apua.

\subsection{\LaTeX{}in asennus ja taustaa}
\label{sec:esimlatexajo}

TeX-jakeluita on saatavilla ``kaikkiin'' eri ympäristöihin.
Suositeltavaa (helpointa?) on käyttää koulun omia Linux-ympäristöjä,
jolloin tarvittavat tausta-asetukset lienevät kunnossa.  Windows- ja
Mac-koneille on saatavana eri TeX-jakeluja, mm.
TeXlipse\footnote{\url{http://texlipse.sourceforge.net/}} (Eclipsen
liitännäinen) ja MiKTeX\footnote{\url{http://miktex.org/}}.

\subsubsection{Lähdetiedostosta PDF:ksi}
\label{sec:esimkaannos}

Tässä zip-paketissa on mukana \verb!Makefile! (päivitä
omat tex- ja bib-tiedostojen nimet), joten pelkkä komento
\verb!make! riittää. Olkoon tässä päätiedoston nimi \verb!main.tex! --
voit sen vaihtaa luonnollisesti miksi tahansa.

Jos ajat \LaTeX{}ia komentoriviltä tai jostain graafisesta ikkunasta,
niin ``käännä ja kaulitse'' \verb!pdflatex main.tex! tarvittaessa kaksikin
kertaa. Kun olet lisännyt tekstiviitteitä komenna \verb!pdflatex main!,
\verb!bibtex main!, \verb!pdflatex main!, \verb!pdflatex main!. Tarkkaile
ruudulle tulevaa tulostusta; esimerkiksi:
%
\begin{verbatim}
Package natbib Warning: Citation(s) may have changed.
(natbib)                Rerun to get citations correct.
\end{verbatim}

Käännösvaiheissa hakemistoon ilmestyy monenlaisia työ- ja 
lokitiedostoja, joiden päätteinä mm. aux, log, toc, bbl, blg.
Joskus voi olla syytä poistaa nämä komentamalla \verb!make clean!.

\subsubsection{Ongelmien ratkaisija: \LaTeX{} checker}
\label{sec:esimlacheck}

Sopiva tekstieditori (emacs, TeXLive, LEd, $\ldots$) osaa
neuvoja, kun joku tekstissä on joku kielioppivirhe. Tämän 
lisäksi oiva työkalu on \verb!lacheck!, joka löytyy (?)
unix-koneista asennettuna ja ladattavissa 
Windows-koneelle%
\footnote{\url{http://www.ctan.org/tex-archive/support/lacheck/}}.
Komennon \verb!lacheck main.tex! (\verb!lacheckw32 main.tex!)
tulostuksesta voi helposti etsiä, missä kohtaa on jäänyt joku
sulku tai ympäristö sulkematta kiinni. Alla olevassa 
uksessa
vika löytyy rivin 224 läheisyydestä.
%
\small
\begin{verbatim}
** luku_sisalto:
"luku_sisalto.tex", line 178: missing `\ ' after "engl."
"luku_sisalto.tex", line 224: <- unmatched "\end{center}"
"luku_sisalto.tex", line 1: -> unmatched "beginning of file luku_sisalto.tex"
"luku_sisalto.tex", line 506: <- unmatched "end of file luku_sisalto.tex"
"main.tex", line 48: -> unmatched "\begin{document}"
\end{verbatim}
\normalsize

\subsubsection{``Ääkköset eivät ole enää ongelma''}

Katso tiedoston \verb!main.tex! alkua. Näppäimistön merkistökoodaus
valitaan kohdassa \verb!inputenc!. Kaikkien lähdetiedostojen tulee
olla saman merkistökoodauksen mukaisia.  Useat editorit osaavat
vaihtaa koodausta; pääosin on tarve vaihtaa ISO-8859-1 (Latin 1) ja
UTF-8 (Unicode) välillä. Linuxissa voit katsoa tiedoston koodauksen
\verb!file -i tiedosto.tex! ja muuttaa sen tarvittaessa\\
\verb!iconv -f ISO_8859-1 -t UTF8 fileLatin1.tex > fileUTF8.tex!.

Kohdassa \verb!fontenc! kerrotaan, millaista ulostuloa \verb!pdflatex!in
halutaan antavan. Tämä näkyy esimerkiksi siinä, ovatko kirjaimet
bittikarttoja vai vektorigrafiikkaa (suurenna PDF-selaimessa 1600\%)
tai miten ääkköset esitetään (kopioi ja liitä tekstiä ruudulta 
tekstieditoriin; näkyykö ä \verb!ä!:nä vai \verb!\"a!:na.

Tämän zip-paketin tiedostot ovat UTF8-koodattuja.

\subsubsection{Tavutus ei toimi?}
\label{sec:esim_tavutus}

\LaTeX{} osaa tavuttaa melko lailla oikein, kun valitaan \verb!babel!illa
oikea kieli. Joidenkin hankalien sanojen osalta voit auttaa
ehdottamalla tavurajoja paikallisesti \verb!ta\-vu\-ra\-ja!
tai koko tekstin osalta \verb!\hyphenation{}!-määrittelyssä
\verb!main.tex!:n alussa. Jos tavutus ei toimi, varmista merkistökoodaus
(UTF-8 / ISO-8859-1). Varmista myös, että valittuna tekstissä oikea kieli
komennolla \verb!\selectlanguage!.

Testaa myös kääntöä IT-keskuksen koneissa -- jos
toimii koululla, niin omasta jakelusta puuttuu \verb!babel!.
Katso myös luvun~\ref{sec:hienos} \verb!sloppypar!-ympäristö.

\subsubsection{Oikoluku}

Oikoluvun suoran tuen puute on yksi iso ongelma kirjoitettaessa suomeksi.
Yksi mahdollisuus on kopioida teksti johonkin oikolukijaan. Helpompi
tapa lienee kopioida tiedostot Linux-koneille, joissa
suomenkielisen tekstin voi oikolukea Voikkoa käyttäen tex-tiedostoista
\verb!tmispell -dsuomi -t main.tex!.
Ohjelman \verb!tmispell! vipu \verb!-t! jättää \LaTeX{}-komennot
huomioimatta. Ohjelma saattaa lukea vain UTF8:aa, joten 
tällöin tiedostot on muutettava tai kopioitava \verb!iconv!illa,
katso ääkköslukua yllä.

\subsubsection{Hienosäätö}
\label{sec:hienos}

\begin{sloppypar}
  Vihoviimeisen version osalta tulee tarkastaa mm. tavutus
  (luku~\ref{sec:esim_tavutus}) ja rivien siisti ulkoasu.  Jos rivillä
  on kaavoja tai eri fontteja, rivi saattaa jatkua pitkäksi. Tällöin
  yksi mahdollisuus on käyttää \verb!sloppypar!-ympäristöä, joka antaa
  \LaTeX{}ille lisää vapautta päättää sanojen väleistä (katso
  lähdekoodi). Komento \verb!\sloppy! antaa väljyyden koko tekstiin.
  \verb!\hyphenpenalty!-arvon määrittämisen pitäisi myös
  auttaa (?).
\end{sloppypar}

Jos luvun $N$ kuvat tai taulukot ``valuvat'' lukuun $N+1$,
voi luvun loppuun kokeilla \verb!\clearpage! tai 
\verb!\afterpage{\clearpage}!, minkä tarkoituksena pakottaa
kelluvat objektit tulostumaan ennen luvun loppua.


\subsubsection{Eräs vaihtoehto Win7-koneella: MiKTeX ja LEd, Notepad++}
\label{sec:esimmiktex}

Esimerkin omaisesti esittelen oman kokonaisuuteni, johon kuuluu
Windows 7 -koneella MiKTeX ja
LEd-editori\footnote{\url{http://www.latexeditor.org/}}.  Jos kaikkia
paketteja (engl. package) ei ole ladattu valmiiksi, niin ne kannattaa
hakea erikseen MiKTeX package managerilla, joka löytyy nimellä
\verb!mpm!.

Ongelmia ja ratkaisuja: Jos paketti on puuttunut ja LEdin kautta
lataus epäonnistuu, niin avaa \verb!mpm! ja lataa sitä kautta.  Jos
tavutus ei toimi, niin tarkista, että sopiva
\verb!miktex-hyphen!-paketti on ladattu ja lisäksi suomen kieli on
valittu MiKTeXin konfiguraatiossa.

Usein kirjoitan tekstiä Notepad++-editorilla%
\footnote{http://notepad-plus-plus.org/}, joka on avoimen lähdekoodin
ohjelma. Sen jälkeen kopioin tiedoston koulun koneelle, jossa ajan
komennon \verb!pdflatex! tai \verb!make!.

\subsection{Tekstin kirjoittaminen}
\label{sec:esimmuotoilut}

Voit kirjoittaa tekstisi suoraan \verb!main.tex!-tiedostoon tai
vaikkapa luvuittain omiin tiedostoihin, jotka voi upottaa
päätiedostoon \verb!\input!-komennolla. Tässä käytetään
dokumenttityyppiä \verb!article!, joka on monessa suhteessa kevyempi
ja sopivampi kuin \verb!report! tai \verb!book!.


\subsubsection{Perusteksti ja muotoilut}

% Kokeile mitä kappaleen viimeisen rivin lopulle käy, 
% kun sloppypar-ympäristön kommentoi pois.
\begin{sloppypar}
Perusteksti kirjoitetaan konstailematta samalla fontilla ja koolla
läpi dokumentin. Sanojen \textbf{vahvistamista} tai
\textit{kursivointia} tulee välttää.  Riviväli on oletusarvoisesti
1,5, mutta sen voi halutessaan vaihtaa väliksi 1 kommentoimalla
\verb!main.tex!in alussa \verb!linespread!-rivin.  Fontin koko, 12 pt,
on asetettu heti \verb!main.tex!:n alussa
\verb!\documentclass!-määrittelyssä.
\end{sloppypar}

% tik.kand 1.5 ja 12

Lainatun tekstin tulee erottua selkeästi omasta tekstistä. Lainauksia
tulee käyttää maltillisesti. Asiat tulisi kertoa aina omin
sanoin. Lainaus merkitään tyypillisesti tekstin seassa
lainausmerkkeihin, jotka kirjoitetaan tyypillisesti kahdella
erillisellä merkillä \verb!''! tavallisten lainausmerkkien \verb!"!
sijaan. (Ainakin) emacs osaa muuttaa automaattisesti lainausmerkin
oikeanlaiseksi. Isompi lainaus voidaan sijoittaa
\verb!quotation!-ympäristöön:

\begin{quotation} { 
\noindent \it
IP Datacasting is a service where digital content formats, software
applications, programming interfaces and multimedia services are
combined through IP (Internet Protocol) with digital
broadcasting \citep{RefWorks:doc:601937178f0884cb02a8458c}. } 
\end{quotation}

Prosenttimerkkiä (\%) eikä mitään sen oikealla puolella olevaa tulostu
ulostuloon. Sillä voi katkaista pitkän rivin ja jat% katkaistaan rivi
kaa seuraavalta (katso lähdetiedostoa!).  Yhdysmerkki eli yhdysviiva
(-) saadaan yhdellä, ajatusviiva (--) kahdella peräkkäisellä
yhdysmerkillä: 7--9-vuotiaat, LaTeXin käyttö -- helppoa vai hullun
hommaa, 25-vuotias.

\subsubsection{Luetelmat}
\label{sec:esimluettelo}

Älä käytä luetelmia jatkuvasti kandidaatintyössäsi. Kirjoita
mieluummin suoraa tekstiä.

\LaTeX{}in peruslistaympäristöt ovat \verb!itemize!, 
\verb!enumerate! (numeroitu)
ja \verb!description!. Listoja ja niiden ulkoasua on
mahdollista muokata~\citep[katso esim.][s. 128]{RefWorks:doc:601937178f0884cb02a8458c}. 
Perusesimerkkejä:
%
\begin{itemize}
\item luetteloaihe yksi
 \begin{itemize}
 \item luetteloaiheen sisäinen lista
 \end{itemize}
\item luetteloaihe kaksi
\end{itemize}

Toinen luettelo omine merkkeineen:
%
\begin{itemize}
\item[b)] luetteloaihe b
\item[E)] luetteloaihe E
\end{itemize}

Numerointi ympäristössä \verb!enumerate!:
%
\begin{enumerate}
\item luetteloaihe yksi
\item luetteloaihe kaksi
\end{enumerate}

\subsubsection{Kuvat ja taulukot}
\label{sec:esimviitteet}

Tyypillisesti kuvat ja taulukot merkitään kelluviksi
(engl. float). Tällöin \LaTeX{} järjestää ne sen kannalta parhaaksi
katsomiin paikkoihin eikä välttämättä juuri siihen, missä kohtaa kuva
tai taulukko on tekstin seassa. Kuvien \verb!\begin{figure}! tai
taulukkojen \verb!\begin{table}! määrittelyissä voi kirjoittaa
hakasulkuihin \verb![htb]!, jossa kirjaimet tarkoittavat (h)ere,
(t)op, (b)ottom.  Kovin yritys pakottaa kuva merkattuun kohtaan on
\verb-[h!]-.

Kuvat ja taulukot voi myös sijoittaa suoraan tekstin sekaan, mutta 
silloin niillä ei ole kuva- tai taulukkotekstejä. Ilman näitä
kuvaan tai taulukkoon ei voi viitata tekstistä.

Kuvat kannattaa tallentaa sopivaan formaattiin. Valokuvat JPG
ja vektorigrafiikka PDF:nä tai PNG:nä (\verb!pdflatex!).
Jos käyttää komentoa \verb!latex! kuvien tulee olla EPS-muodossa 
(Encapsulated PostScript). Kuvaformaattia voi muuttaa sopivilla
kuvankäsittelyohjelmistoilla tai Linux-koneissa esim. 
 \verb!convert!- tai \verb!eps2pdf!-ohjelmilla.

Tässä ensin yksi kuva ja kuvaan~\ref{fig:indica_model} viittaminen.
Kuva on \verb!figure!-ympäristössä ja siten ``kelluva'' (float).
Englanninkielisessä tekstissä usein isolla alkukirjaimella
Figure~\ref{fig:indica_model}. Kuvatekstin ``Kuva'' muuttuu
sanaksi ``Figure'', kun valitset kieleksi englannin 
(\verb!\usepackage[english]{babel}!). Kuvan kokoa voi säätä
optiolla \verb!width! tai \verb!height!.

\begin{figure}[htb]
  \begin{center}
    \includegraphics[width=0.4\textwidth]{indica_model}
    \caption{INDICAn kaksitasoinen arvomalli.}
    \label{fig:indica_model}
  \end{center}
\end{figure}

Periaatteessa samaan kelluvaan objektiin voi laittaa useammankin kuvan
(kuva~\ref{fig:tuplat}) tai asetella niitä taulukoilla.
Jos tarvitset useita kuvia rinnakkain, harkitse
myös pakettia \verb!subfigure!. Kuvien olisi hyvä olla samankokoisia.

\begin{figure}[htb]
  \begin{center}
    \includegraphics[height=20mm]{indica_model}
    %\hfill  % toinen vas. reunaan, toinen oikeaan
    \hspace{10mm}  % sentti väliä kuville
    \includegraphics[height=20mm]{AaltoSCI_FI_1}
    \caption{Kaksi kuvaa rinnan esimerkkinä.}
    \label{fig:tuplat}
  \end{center}
\end{figure}

Yksinkertainen taulukko, joka ei ole kelluva ja siten sen pitäisi
latoutua heti tämän tekstin alle. Tässä komento \verb!\topcaption!
kyllä varaa itselleen ``Taulukko 1'', mutta tekstiä ei näy missään.

\topcaption{Yksinkertainen taulukko}
%\begin{center}                         % keskitys?
\begin{tabular}{|l|l|l|} 
\hline
Tässä & sarakkeet & ei ole eroteltu mitenkään \\
ja    & ne        & saattavat valua yli laidankin ikävästi \\
\hline
\end{tabular}
%\end{center}

Toinen kelluva perustaulukko, viitataan nyt taulukkoon~\ref{table:perustaulu}.
Lähdetekstiä lukiessa näet tilde-merkin, joka pakottaa välilyönnin
mutta estää rivinvaihdon.

\begin{table}[ht]
\caption{Tässä perustaulukko.}
\label{table:perustaulu}
\begin{center}
\begin{tabular}{|l|l|l|} 
\hline
Tässä & sarakkeet & ei ole eroteltu mitenkään \\
\hline
ja    & ne        & saattavat valua yli laidankin ikävästi, %
                   siksi käytä taulukkoa~\ref{table:dvbt_param}. %
                   Teksti katoaa jonnekin sivun ulkopuolelle. \\
\hline
Nro   & Nro       & Nro \\
\hline
$-4$  & $8$       & $12$ \\
\hline
\end{tabular}
\end{center}
\end{table}

Vielä kolmas esimerkki taulukosta, jossa sarakkeiden leveys määritelty
ja soluissa voi olla useampi rivi tekstiä. Katso
taulukko~\ref{table:dvbt_param}.

\begin{table}[th]
\caption{The DVB-T transmission parameters.}
\label{table:dvbt_param}
\begin{center}
\begin{tabular}{|p{0.35\textwidth}|p{0.45\textwidth}|} 
    \hline
Parameter & Typical values \\
    \hline
    \hline
Physical channel&8 MHz (also 6 MHz or 7 MHz possible)\\ 
    \hline
COFDM mode (number of subcarriers, 
subcarrier width, 
signal element length)
&8k (6817, 1116 Hz, 896 $\mu$s) or 
2k (1705,4464 Hz, 224 $\mu$s)\\
    \hline
Guard interval (8k/4k duration)
&1/4 (224/56 $\mu$s), 1/8 (112/28 $\mu$s),
   1/16 (56/14 $\mu$s) or 1/32 (28/7 $\mu$s)\\
    \hline
Inner code rate &1/2, 2/3, 3/4, 5/6 or 7/8\\
    \hline
Signal  element constellation 
&QPSK, 16-QAM or 64-QAM \\
    \hline
\end{tabular}
\end{center}
\end{table}


% Tässä esimerkki monisivuisesta taulukosta.
% EI toiminut aivat täydellisesti 27.1.2011: tablecaption hyppäsi edelliselle
% sivulle ennen ylläolevaa taulukkoa. Tämä supertabular taas ei voi olla 
% table-ympäristössä, kun muuten ei sivutu. supertabular on vain tabular,
% joka pitää kirjaa milloin sivun vaihto ja lisää automaatigisesti \end{tabular}
% ja uudestaa \begin{tabular}.
%\begin{center}
%\tablecaption{Esimerkki monisivuisesta taulukosta.}
%%\topcaption{taulukon nimi ylhäällä}
%%\bottomcaption{taulukon nimi alhaalla}
%\tablefirsthead{\hline \# & Sarakkeen aihe \\ \hline \hline }
%\tablehead{\hline \multicolumn{2}{|l|}{jatkoa edelliseltä sivulta} \\ %
%  \hline  \# & Sarakkeen aihe  \\ \hline \hline }
%\tabletail{\hline \multicolumn{2}{|r|}{jatkuu seuraavalle sivulle} \\ \hline}
%\tablelasttail{\hline}
%\label{table:pitkataulukko}
%\begin{supertabular}{|>{\bf}r|p{120mm}|} 
%\hline
%\multicolumn{2}{|l|}{Otsikko A} \\ 
%\hline
%1 & complex numbers, Carthesian and polar coordinate systems, Euler's formula   %\\
%2 & Euler's formula, cosine and sine, odd and even functions   \\
%3 & complex numbers, graphical notation   \\
%\hline 
%\multicolumn{2}{|l|}{Otsikko B} \\ 
%\hline
%14 & analog, discrete-time and digital signal   \\
%17 & analog, discrete-time and digital signal   \\
%16 & digital signals and spectra, spectogram \\
%17 & Fourier series, Fourier transforms: CTFT, DTFT, DFT \\
%18 & time-frequency-domain analysis and filtering \\
%21 & moving average (MA) filter, a simple FIR filter   \\
%22 & a simple IIR filter \\
%23 & flow / block diagram of a discrete-time system   \\
%24 & recognition of LTI systems, causal LTI systems, filter order, FIR, IIR   %\\
%25 & properties of LTI systems: linear, time-invariant, causal, stable   \\
%26 & shifted and scaled sequences in LTI system   \\
%31 & convolution as products of polynomials   \\
%32 & deconvolution   \\
%33 & parallel and cascade (series) LTI systems   \\
%34 & matched filter   \\
%35 & auto- and cross-correlation   \\
%37 & spectrum, CTFT, discrete-time Fourier transform (DTFT), %
% discrete Fourier transform (DFT)   \\
%38 & DTFT, computation from definition   \\
%39 & DTFT, using a transform table   \\
%40 & $2\pi$-periodic spectrum, DTFT   \\
%41 & magnitude/amplitude response, periodicity of DTFT   \\
%43 & sampling, Shannon's theorem   \\
%44 & impulse train and Fourier-series   \\
%45 & impulse train and sampling in frequency-domain   \\
%46 & sampling in frequency-domain   \\
%47 & aliasing   \\
%48 & sampling, aliasing, anti-aliasing   \\
%49 & anti-aliasing filter  \\
%51 & circular shift, DFT \\
%54 & amplitude response grafically from pole-zero-plot   \\
%55 & analysis of LTI IIR system, pole-zero plot   \\
%56 & transfer function, region of convergence (ROC)   \\
%57 & scaling factor   \\
%63 & direct form (DF) structures   \\
%70 & FIR-window method in digital filter design   \\
%71 & computational comparisons between IIR and FIR filters   \\
%73 & FFT computational complexity   \\
%74 & radix-2 DIT FFT algorithm   \\
%75 & binary addition and substraction, two's complement  \\
%78 & roundoff noise in FIR filters   \\
%79 & signal-to-noise ration (SNR) \\
%80 & error-feedback structure   \\
%81 & up- and downsampling in time- and frequency domain   \\
%82 & multirate system analysis   \\
%83 & linearity of up- and downsampling systems   \\
%84 & filter bank   \\
%85 & interpolated FIR filter (IFIR), FIR window method design  \\
%\end{supertabular}
%\end{center}


\subsubsection{Matematiikka}
\label{sec:esimmatematiikka}

Lyhyet matemaattiset kaavat voi kirjoittaa tekstin
sisään $E_{\textrm{total}} = m_i c^2$, mutta kaavat, joita käytetään, 
kannattaa keskittää
%
\begin{equation}
\label{eq:kaava1}
x^2 + y^2 = 1 
\end{equation}
%
josta lyhyempi versio ilman kaavan numerointia
%
\[ x^2 + y^2 = 1 \]
%
tai jakaa useammalle riville
\begin{equation}
\label{eq:kaava2}
\begin{aligned}
x^2 + y^2 &= 1 \\
        x &= \sqrt{1-y^2}
\end{aligned}
\end{equation}
%

Kreikkalaiset kirjaimet löytyvät taulukosta~\ref{table:kreikka}.

\begin{table}
\caption{Kreikkalaiset kirjaimet}
\label{table:kreikka}
\begin{center}
\begin{tabular}{|llllllll|}
\hline
$\alpha$        &$\theta$       &o              &$\tau$         &%
$\beta$         &$\vartheta$    &$\pi$          &$\upsilon$     \\
$\gamma$        &$\gamma$       &$\varpi$       &$\phi$         &%
$\delta$        &$\kappa$       &$\rho$         &$\varphi$      \\
$\epsilon$      &$\lambda$      &$\varrho$      &$\chi$         &%
$\varepsilon$   &$\mu$          &$\sigma$       &$\psi$         \\
$\zeta$         &$\nu$          &$\varsigma$    &$\omega$       &%
$\eta$          &$\xi$          &               &               \\
\hline
$\Gamma$        &$\Lambda$      &$\Sigma$       &$\Psi$         &%
$\Delta$        &$\Xi$          &$\Upsilon$     &$\Omega$       \\
$\Theta$        &$\Pi$          &$\Phi$         & & & & &       \\
\hline
\end{tabular}
\end{center}
\end{table}

Matematiikkaan liittyviä ohjeistusta löytyy esim. \citet{RefWorks:doc:601937178f0884cb02a8458c}.
Makroja sisältävästä tiedostosta \verb!makroja.tex! löytyy joitakin
esimerkkejä, kuten 
%
\[ \myInt{-\infty}{0}{e^{x}}{x} \]
%

\subsubsection{Algoritmit ja ohjelmalistaukset}

Työlle oleellisen tulostuslistauksen voi laittaa
\verb!verbatim!-ympäristöön.
%
\begin{verbatim}
Output written on main.pdf (23 pages, 268760 bytes).
Transcript written on main.log.
\end{verbatim}
%
\begin{sloppypar}
Algoritmien ja pseudokoodin esittämiseen tarvitaan esimerkiksi
\verb!algorithmic!- ja \verb!algorithm!-paketit.  Ohjelman esittelyn
voi tehdä vaikkapa \verb!program!-paketin avulla.  Ohjelmakoodia ei
tyypillisesti lisätä edes liitteeksi.  Jos näin kuitenkin tehdään,
käytä ylläolevia tai esimerkiksi \verb!listinginput!-komentoa. Näiden
käyttöön löytyy apua Internetistä.
% Katso esim. http://en.wikibooks.org/wiki/LaTeX/Algorithms_and_Pseudocode
\end{sloppypar}

\subsection{Viittaukset ja lähdeluettelo}
\label{sec:esimviitteet}


\subsubsection{Ristiinviittaukset}
\label{sec:esimristiviite}

Ristiinviittauksia taulukkoon, kuvaan, kappaleeseen tai muuhun voi
tehdä \verb!\ref!-komennolla, kuten tässä
kuvaan~\ref{fig:indica_model}.  Isossa työssä voi olla näppärä antaa
selailun nopeuttamiseksi myös sivunumero: kuva~\ref{fig:indica_model}
löytyy sivulta~\pageref{fig:indica_model}. Tilde-merkki pakottaa
välin, mutta sitoo sen niin, etteivät ne esiinny eri riveillä.

Johdantoluvun lopussa tyypillisesti esitellään kirjan rakenne, joten
voi viitata, että luvussa~\ref{sec:esimluettelo} tarkastellaan sitä ja
tätä, luvussa~\ref{sec:esimtekstiviite} tuotakin. Englanniksi
kirjoitettaessa isolla etukirjaimella ``Figure~\ref{fig:indica_model} on
page~\pageref{fig:indica_model}'' ja ``Section~\ref{sec:esimtekstiviite}''.


\subsubsection{Lähdetiedosto}
\label{sec:esimlahdetiedosto}

Lähdeluettelo kirjoitetaan joko käsin tai automaattisesti
kerätyistä lähteistä bib-päät\-tei\-seen tiedostoon. Katso 
esimerkkejä tiedostosta \verb!lahteet.bib!, jota kutsutaan
\verb!main.tex! tiedoston loppupuolella. 

Kirjaa tiedot mahdollisimman täydellisesti. Kiinnitä erityisesti
huomio nimiin ja kirjoita ne samanmuotoisesti
\verb!Sukunimi, Etunimi and Sukunimi2, Etunimi2 Etukirjain2.!.

Jos esimerkiksi kirjojen nimissä on muotoiluja, pakkaa ne
kaarisulkuihin \verb!{My {T}hesis}!. 
Pelkkä \verb!title={My Thesis}! muuttuu muuten
muotoon ``My thesis''.

Kurssilla opetetaan käyttämään RefWorksia lähteiden kokoamiseen.
Sieltä on mahdollista saada BibTeX-muotoinen luettelo lähteistä.
Valitse ylävalikosta ``Bibliography'' ja ensimmäisellä kerralla
valitse alasvetovalikosta ``Access output style manager'' ja
sieltä lisää BibTeX suosikkeihin. Määrää lähdetiedosto tekstityyppiseksi
(``Text'') ja luo tiedosto. RefWorksin tulostukseen tulee loppuun
ylimääräinen sulkumerkki \verb!}!, viimeisen tietorivin perässä
ylimääräinen pilkku ja alusta puuttuu itse viittausnimi, jonka
voit itse keksiä.

Google Scholar palauttaa myös BibTeX-muotoisia lähdeviitteitä,
kunhan olet sen asetuksissa valinnut BibTeXin mahdolliseksi.

\subsubsection{Tekstiviite}
\label{sec:esimtekstiviite}

Tässä pohjassa käytetään Helsingin yliopiston 
\verb!tktl!-tyyliä, joka pohjautuu \verb!alpha!-
ja \verb!natbib!-tyyliin~\cite{RefWorks:doc:601937178f0884cb02a8458c}.
Tekstiviitteet saadaan mukaan joko tekijä-vuosi-tavalla (oletusarvo)
tai yksinkertaisella numeromerkinnällä, kuten \verb![1]!. 
Jälkimmäistä varten sinun pitää vaihtaa tekstiviitteen esitystapa
tiedon \verb!main.tex! lopussa rivillä \verb!bibpunct!. 

% kokeillaan vähän vapaampaa, kun natbibiin kohdalla rivivaihto
\begin{sloppypar}
Katso eri tapoja tekstiviitteiden muotoiluun sivulta
\url{http://merkel.zoneo.net/Latex/natbib.php}.
Viittauskomennot  \verb!\citet! ja \verb!\citep! ovat
hyviä tekijä-vuosi-tavassa \verb!natbib!iin liittyen
ja \verb!\cite! on perusviittauskomento.
\end{sloppypar}

Pari esimerkkiä:
% \citet
\citet[s. 21]{RefWorks:doc:601937178f0884cb02a8458c} on havainnut asian jos toisenkin. 
% \citep
\cite{detect_malicious}
Tämä ja tuo uusi havainto on vahvistanut teoriaa~\citep[s. 22]{detect_malicious}.
% \citep
Joku asia on selitetty tarkasti monissa lähteissä 
\citep[katso][s. 27]{RefWorks:doc:601937178f0884cb02a8458c}.
% KATSO LISÄÄ: http://merkel.zoneo.net/Latex/natbib.php

\verb!tktl!-tyylin lähdetiedostoa \verb!tktl.dtx! ei ole
muokattu Aalto-yliopiston käyttöön, joten esimerkiksi 
lähdeviitteen merkintätyyppi \verb!@MasterThesis! tuottaa lähdeluetteloon
tekstin ``Pro gradu'' (kts. \verb!finnbst.tex!).
Tämä voidaan muuttaa antamalla kyseisen merkintätyypin kentälle
\verb!type! arvo ``Diplomityö''. 

\subsubsection{Lähdeluettelo}
\label{sec:esimlahdeluettelo}

Lähdeluettelon tulisi nyt ilmaantua dokumentin loppuun
automaattisesti. Jos sitä ei näy ja etenkin jos tekstiviitteiden
paikalla on kysymysmerkkejä, niin muista ajaa \verb!bibtex main!.

% --------------------------------------------------------------------

% Tätä käytetään vain testaustarkoituksiin, kun halutaan katsoa 
% miten sivu täyttyy pelkästä tekstistä tai miten fonttikoko
% vaikuttaa. 
%
% Teksti haettu eduskunta.fi-sivustolta tammikuussa 2011.

\section{Testi: pelkkää tekstiä}

Eduskunnan ympäristövaliokunta ehdottaa, että nykyinen
hajajätevesiasetus kumotaan ja ympäristöministeriö laatii uuden
asetuksen mahdollisimman pian. Lisäksi valiokunta ehdottaa, että
ympäristönsuojelulakiin sisällytetään uusi 3 a luku, johon tulee
yhteensä 5 pykälää. Ympäristövaliokunta antoi asiaa koskevan mietinnön
25. tammikuuta (YmVM 18/2010).

Valiokunta esittää lisäksi eduskunnan hyväksyttäväksi viisi
lausumaehdotusta, joilla vauhditetaan lain ja uuden asetuksen selkeää
ja tehokasta toimeenpanoa. Nyt esitettävät muutokset on valmisteltu
tiiviissä yhteistyössä ympäristöministeriön
kanssa. Ympäristövaliokunta on käsitellyt asiaa laajasti ja
perusteellisesti sekä ottanut ehdotuksissaan huomioon sen, mitä
perustuslakivaliokunta aiemmin asiassa edellytti.

Ehdotetuilla muutoksilla kohtuullistetaan hajajätevesien käsittelyn
vaatimustasoa siten, että vaatimukset asettuvat yleisesti sellaiselle
tasolle, että ne ovat kohtuullisella investoinnilla ja toimivalla
tekniikalla moitteettomasti täytettävissä. Esitetty kohtuullistaminen
ei kuitenkaan vaaranna ympäristönsuojelun tasoa ja on esimerkiksi
Itämeren suojelukomissio HELCOMin suositusten mukainen.

Nykyisen asetuksen lievempi vaatimustaso (orgaaninen aine 80\%,
kokonaisfosfori 70\%, kokonaistyppi 30\%) säädetään pääsääntöisesti
noudatettavaksi lähtökohdaksi, koska suuri osa kiinteistöistä
sijaitsee muualla kuin herkillä alueilla kuten ranta-alueella. Kunnat
voivat kuitenkin ympäristönsuojelumääräyksillä antaa tiukempia
määräyksiä ympäristön pilaantumisvaaran perusteella herkillä alueilla
kuten ranta-alueilla tai tärkeillä pohjavesialueilla.

Puhdistustasovaatimuksen perusteista säädetään laissa ja prosentit
edelleen asetuksella. Uudet säännökset ovat ensisijaisesti
jätevesijärjestelmän suunnittelun ja rakentamisen lähtökohta, eivät
valvontaperuste. Tosiasiallinen puhdistustulos voi siten vaihdella
esimerkiksi sääoloista tai kiinteistön käytön väliaikaisista
muutoksista johtuen, ja silti järjestelmä täyttää lain vaatimukset.

Valiokunta korostaa, että lain ja asetuksen mukaisten vaatimusten
toteuttaminen käytännössä edellyttää aina kiinteistökohtaista
arviointia. Kiinteistökohtainen neuvonta on siksi järjestettävä
valtakunnallisessa ohjauksessa. Valiokunta edellyttää riittävää
määrärahaa neuvonnan järjestämiseksi kunnissa.  Vaatimustason
muutoksella kohtuullistetaan tarvittavia investointeja, mutta
säilytetään samalla riittävä ympäristönsuojelun taso. Erityisen
tärkeää on ehkäistä lähiympäristön kuten kaivoveden pilaantumista ja
muita vastaavia hygieenisiä haittoja.

Muutoksella vapautetaan suoraan lain nojalla lain voimaan tullessa 68
vuotta täyttäneet vakituisesti asuttujen kiinteistön haltijat
asetuksen käsittelyvaatimuksista. Vapautus ei koske uudisrakentamista
eikä vapaa-ajan asuntoja. Käytännössä toimenpiteitä tarvitaan
vesivessalla varustetuilla vapaa-ajan asunnoilla.  Valtaosalla
vapaa-ajan asuntoja lainsäädäntö ei aiheuta mitään toimenpiteitä.

Muutoksella tarkennetaan, ketkä voivat hakea kunnalta viiden vuoden
mittaista vapautusta asetuksen vaatimusten noudattamisesta niin
sanotun sosiaalisen suoritusesteen (erityisen vaikeassa
elämäntilanteessa olevat kiinteistönomistajat kuten työttömät ja
pitkäaikaissairaat) perusteella.  Lainmuutos ja uusi asetus voivat
tulla voimaan 15.3.2011. Jo rakennetun kiinteistön olemassa olevan
jätevesijärjestelmän on täytettävä puhdistustehosta asetetut
vaatimukset vuoteen 2016 mennessä.

Suomen Euroopan neuvoston valtuuskunnan jäsenet Kimmo Sasi (kok.) ja
Krista Kiuru (sd.) vaativat parlamentaarisen yleiskokouksen
istunnossa, että Kosovossa rikosten uhreina kadonneiden ihmisten
kohtalot selvitetään.

Yleiskokous käsitteli tiistaiaamuna etukäteen paljon huomiota
herättänyttä sveitsiläisen kansanedustajan Dick Martyn raporttia
Kosovon vuoden 1999 sodan jälkimainingeissa tapahtuneista
ihmisoikeusloukkauksista. Martyn mukaan Kosovon vapautusarmeija
surmasi vangeiksi ottamiaan ihmisiä, poisti heiltä elimiä ja kauppasi
niitä pimeillä markkinoilla.

Keskustelussa Martyn väitteet myös kiistettiin. Kansanedustaja Krista
Kiuru korostikin täysistuntopuheessaan, että väitteet pitää tutkia
huolellisesti.  Totuuden selvittämiseksi tarvitaan puolueeton ja
läpinäkyvä tutkinta kansallisten ja kansainvälisten viranomaisten
yhteistyönä, hän totesi.  Kansanedustaja Kimmo Sasi (kok.) piti
huolestuttavana, että satojen ihmisten epäillään kadonneen sodan
jälkimainingeissa rikoksen uhreina.

Tarpeellisia selvityksiä ei voida tehdä ilman Albanian ja Kosovon
täydellistä yhteistyötä. Euroopan neuvoston pitääkin varmistaa, että
selvityksiä ei estetä tai vaikeuteta poliittisista syistä. Kosovon
hallitukselle onkin tärkeää, että asia tutkitaan. Vaikeidenkin
historian tapahtumien täydellinen läpikäynti auttaa rakentamaan
parempaa tulevaisuutta. Osoittamalla olevansa vahva oikeusvaltio,
vahvistaa Kosovo omaa asemaansa itsenäisenä valtiona, Sasi totesi.

Eduskunta korjaa pikavauhtia neljän kansanedustajan lakialoitteella
metsälakiin jääneen virheen, jonka takia pienet taimikot jäivät
tilapäisesti hirvivahinkokorvausten ulkopuolelle.  Metsälain muutos
tuli voimaan vuoden vaihteessa. Maa- ja metsätalousministeriössä lain
valmistelussa tapahtuneen teknisen virheen takia pienet, alle 1,3
metrin pituiset taimikot jäivät lakimuutoksen myötä hirvivahinkojen
korvauksen ulkopuolelle.  Lakitekstiin kiireessä jäänyt virhe
havaittiin vasta, kun laki oli jo hyväksytty ja vahvistettu, mitä
ministeriö pahoitteli. Virhe korjataan eduskunnan maa- ja
metsätalousvaliokunnan puheenjohtajan Jari Lepän (kesk.)
lakialoitteella, jonka on allekirjoittanut myös kolme muuta
valiokunnan kansanedustajaa.

Aloitteen tekijät ehdottavat, että kyseistä riistavahinkolain pykälää
korjattaisiin siten, että lakia sovellettaisiin taannehtivasti vuoden
alusta alkaen. Siten kukaan ei lopullisesti menetä oikeuttaan
korvaukseen.  Lakialoite (LA 121/2010) oli lähetekeskustelussa
tiistaina. Keskustelun päätteeksi asia lähetettiin maa- ja
metsätalousvaliokuntaan.

Euroopan unionin ympäristömerkki siirtyy samaan kotipesään
pohjoismaisen Joutsenmerkin kanssa. Eduskunta hyväksyi tiistaina
lakimuutoksen, jolla ympäristömerkinnän kansallisten tehtävien hoito
siirtyy Suomen Standardisoimisliitolta Motiva Services Oy:lle.
Suomessa on käytössä kaksi virallista
ympäristömerkintäjärjestelmää. Pohjoismainen ympäristömerkki eli
Joutsenmerkki on Pohjoismaiden ministerineuvoston vuonna 1989
perustama merkki. EU:n ympäristömerkki on Euroopan parlamentin ja
neuvoston antamaan asetukseen pohjautuva ympäristömerkki.

% --------------------------------------------------------------------

\section{Loppuluku}

Loppuluku päättää työn. Luvun nimi on tyypillisesti ``yhteenveto'' tai
``johtopäätöksiä''. Valitse se otsikko, joka tuntuu sopivammalta työsi
luonteeseen. Joka tapauksessa loppuluku sisältää niin työn yhteenvedon
kuin johtopäätöksiä työn tulosten perusteella. Pääajatus on antaa
lukijalle selvä kuva siitä, miten johdannossa asetettuihin
tavoitteisiin työssä vastattiin.

Käsittele loppupuvussa seuraavia asioita (jotakuinkin tässä järjestyksessä):
%
\begin{itemize}
  \item Muistutus työn tavoitteista (sidoksisuus johdantoon)
  \item Päätulokset kootaan yhteen, pohditaan niiden merkitystä
  \item Suositukset konkreettisiksi toimenpiteiksi (``Mitä sitten?'' 
Nyt kun käytössä on tämän työn myötä tullut tieto, 
mitä se nyt tarkoittaa tälle asialle/alalle.)
  \item Tulosten soveltuvuus, käyttöön liittyvät rajoitukset
  \item Jatkotutkimustarve 
(``Tulevaisuudessa olisi mielenkiintoista selvittää...'' tms.)
  \item Työn onnistumisen arviointi 
(Huom! Älä arvioi omaa kirjoitusprosessiasi vaan tekemääsi tutkimusta)
\end{itemize}

% --------------------------------------------------------------------

